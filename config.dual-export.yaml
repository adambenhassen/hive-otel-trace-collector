# Example config: Vercel logs -> Loki + Kafka (dual export)
#
# Logs are sent to both Loki and Kafka simultaneously.
# Configure both exporters and they will auto-initialize.
#
# Usage:
#   hive-otel-trace-collector --config config.dual-export.yaml

server:
  port: 4318
  health_port: 13133

receivers:
  vercel:
    webhook_secret: "${VERCEL_WEBHOOK_SECRET}"

exporters:
  loki:
    url: "${LOKI_URL:-http://loki:3100}"
    # tenant_id: "default"  # Optional: for multi-tenant Loki
    # username: "${LOKI_USERNAME}"
    # password: "${LOKI_PASSWORD}"

  kafka:
    bootstrap_servers: "${KAFKA_BOOTSTRAP_SERVERS:-localhost:9092}"
    topic: "vercel-logs"
    topic_strategy: "single"
    serialization: "json"
    acks: "1"
    compression: "lz4"

pipelines:
  logs:
    receiver: vercel
    exporter: loki  # Primary exporter (Kafka auto-inits if configured)
    batch:
      max_size: 5000
      timeout_ms: 200
      workers: 2
